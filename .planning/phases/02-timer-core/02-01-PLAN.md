---
phase: 02-timer-core
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/App.tsx
  - src/App.css
  - src/components/Timer.tsx
  - src/components/Timer.css
autonomous: true

must_haves:
  truths:
    - "User can click Start and watch timer count down from 00:30"
    - "User can click Stop to pause countdown, then Start to resume"
    - "User can click Reset to return timer to 00:30"
    - "User can switch between Work and Break modes"
    - "Current mode is visually differentiated (color change)"
    - "Timer displays time in MM:SS format"
  artifacts:
    - path: "src/components/Timer.tsx"
      provides: "Timer component with countdown logic and controls"
      exports: ["Timer"]
      min_lines: 60
    - path: "src/components/Timer.css"
      provides: "Timer styling including mode colors"
      contains: ".timer"
    - path: "src/App.tsx"
      provides: "Root component rendering Timer"
      contains: "Timer"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/Timer.tsx"
      via: "import and render"
      pattern: "import.*Timer"
    - from: "src/components/Timer.tsx"
      to: "useState"
      via: "React state for seconds, isRunning, mode"
      pattern: "useState"
    - from: "src/components/Timer.tsx"
      to: "useEffect"
      via: "Interval for countdown when isRunning"
      pattern: "useEffect.*setInterval"
---

<objective>
Build a functional countdown timer with Start/Stop/Reset controls and Work/Break mode toggle.

Purpose: This is the core functionality of the Pomodoro demo. Users will interact with these controls during the live demo to show timer behavior.

Output: A working timer component that counts down from 30 seconds, can be controlled with buttons, and visually differentiates between Work and Break modes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase 1 establishes: React app at src/App.tsx with "Pomodoro Timer" heading
# We build on that foundation
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Timer component with state and display</name>
  <files>
    src/components/Timer.tsx
    src/components/Timer.css
    src/App.tsx
  </files>
  <action>
    Create the Timer component with core state and display.

    Create src/components/Timer.tsx:
    - Import React, useState, useEffect
    - State: seconds (number, default 30), isRunning (boolean, default false), mode ('work' | 'break', default 'work')
    - Display: Format seconds as MM:SS using padStart (e.g., 30 -> "00:30", 5 -> "00:05")
    - Structure: Container div with className based on mode, time display, placeholder for controls

    Create src/components/Timer.css:
    - .timer container: centered, large display
    - .timer-display: large font (3-4rem), monospace for consistent digit width
    - .timer.work: reddish/warm background or border (work mode indicator)
    - .timer.break: bluish/cool background or border (break mode indicator)
    - Button styles: clear, clickable, good size for demo visibility

    Update src/App.tsx:
    - Import Timer component
    - Replace "Pomodoro Timer" heading with Timer component (or keep heading and add Timer below)
    - Keep it simple: just render the Timer

    The timer should show "00:30" on initial load with work mode styling.
  </action>
  <verify>
    - ls src/components/Timer.tsx src/components/Timer.css
    - grep "useState" src/components/Timer.tsx
    - grep "00:30" or verify padStart logic exists
    - npm run dev and check browser shows timer display
  </verify>
  <done>Timer component exists, displays "00:30" with mode-based styling, integrated into App.tsx</done>
</task>

<task type="auto">
  <name>Task 2: Add countdown logic and Start/Stop/Reset controls</name>
  <files>
    src/components/Timer.tsx
  </files>
  <action>
    Add the interactive controls and countdown behavior.

    Update src/components/Timer.tsx:

    Controls (buttons):
    - Start button: Sets isRunning to true (disabled when already running)
    - Stop button: Sets isRunning to false (disabled when not running)
    - Reset button: Sets seconds to 30 and isRunning to false

    Countdown logic (useEffect):
    - When isRunning is true, create setInterval that decrements seconds every 1000ms
    - When seconds reaches 0, set isRunning to false (stop the timer)
    - Clean up interval on unmount or when isRunning changes to false
    - Dependency array: [isRunning, seconds]

    Important implementation details:
    - Use useEffect cleanup function to clearInterval
    - Check seconds > 0 before decrementing to avoid negative values
    - The interval should decrement by 1 each second, not skip

    Button layout:
    - Row of buttons below the time display
    - Clear labels: "Start", "Stop", "Reset"
    - Visual feedback for disabled state
  </action>
  <verify>
    - grep "setInterval" src/components/Timer.tsx
    - grep "clearInterval" src/components/Timer.tsx
    - grep "Start" src/components/Timer.tsx (button exists)
    - Manual test: Start timer, watch countdown, Stop pauses, Start resumes, Reset returns to 00:30
  </verify>
  <done>Timer counts down when Start clicked, pauses on Stop, resets to 00:30 on Reset</done>
</task>

<task type="auto">
  <name>Task 3: Add Work/Break mode toggle with visual feedback</name>
  <files>
    src/components/Timer.tsx
    src/components/Timer.css
  </files>
  <action>
    Add mode switching functionality.

    Update src/components/Timer.tsx:

    Mode toggle buttons:
    - "Work" button: Sets mode to 'work', resets timer to 30 seconds, stops if running
    - "Break" button: Sets mode to 'break', resets timer to 30 seconds, stops if running
    - Visual indication of current mode (button highlighted or different style when active)

    Mode affects display:
    - Container className includes mode: `timer ${mode}` -> "timer work" or "timer break"
    - This triggers CSS color changes

    Update src/components/Timer.css:

    Mode styling (make visually obvious for demo):
    - .timer.work: Warm color scheme (red/orange tones, e.g., background: #fee2e2 or border: 3px solid #ef4444)
    - .timer.break: Cool color scheme (blue/green tones, e.g., background: #dbeafe or border: 3px solid #3b82f6)
    - Mode buttons: Show which is active (e.g., active button has filled background, inactive is outlined)

    Layout consideration:
    - Mode buttons can be above the timer display (Work | Break toggle row)
    - Control buttons (Start/Stop/Reset) below the timer display
    - Clear visual hierarchy
  </action>
  <verify>
    - grep "mode" src/components/Timer.tsx (state and className)
    - grep ".timer.work" src/components/Timer.css
    - grep ".timer.break" src/components/Timer.css
    - Manual test: Click Work/Break buttons, see color change, timer resets
  </verify>
  <done>Mode toggle works, visual differentiation clear, timer resets on mode change</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Open http://localhost:5173 in browser
2. Verify timer shows "00:30" initially with work mode styling (warm colors)
3. Click Start - timer counts down (00:29, 00:28...)
4. Click Stop - timer pauses at current value
5. Click Start - timer resumes from paused value
6. Click Reset - timer returns to 00:30 and stops
7. Click Break - timer resets to 00:30, color changes to cool/blue tones
8. Click Work - timer resets to 00:30, color changes to warm/red tones
9. Start timer, let it reach 00:00 - timer stops automatically
10. No console errors throughout testing
</verification>

<success_criteria>
- [ ] Timer displays in MM:SS format (00:30)
- [ ] Start button begins countdown
- [ ] Stop button pauses countdown
- [ ] Reset button returns to 00:30 and stops
- [ ] Work mode has distinct visual style (warm colors)
- [ ] Break mode has distinct visual style (cool colors)
- [ ] Mode buttons reset and stop timer when switching
- [ ] Timer auto-stops at 00:00
- [ ] No React console errors
- [ ] Requirements TIMER-01 through TIMER-05 satisfied
- [ ] Requirements MODE-01 through MODE-03 satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/02-timer-core/02-01-SUMMARY.md`
</output>
